(this["webpackJsonpcompanies-tables"]=this["webpackJsonpcompanies-tables"]||[]).push([[0],{26:function(e,t,n){e.exports=n(50)},50:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(22),r=n.n(c),o=n(2),u=n(3),i=n(6),m=n.n(i),s=n(4),d=n(10);function f(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: space-around;\n    background-color: lightblue;\n    padding: 10px;\n"]);return f=function(){return e},e}var b=s.a.div(f()),E=function(e){var t=e.changeOffset,n=e.offset,a=e.itemsNumber;return(l.a.createElement(b,null,l.a.createElement("button",{onClick:function(){return t(0)},disabled:0===n},"First page"),l.a.createElement("button",{onClick:function(){return t(n-20)},disabled:n-20<0},"Prev"),l.a.createElement("div",null,"Page:",parseInt(n/20+1.5),"Results: ",a),l.a.createElement("button",{onClick:function(){return t(n+20)},disabled:n>=a-20},"Next"),l.a.createElement("button",{onClick:function(){return t(a-20)},disabled:n>=a-20},"Last")))};function g(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: left;\n    background-color: lightblue;\n    padding: 10px;\n"]);return g=function(){return e},e}var v=s.a.div(g()),p=function(){return l.a.createElement(v,null,"Header")},h=function(e){var t=e.companiesData,n=(e.displayNumber,Object(a.useState)(null)),c=Object(o.a)(n,2),r=c[0],u=c[1],i=Object(a.useState)(null),m=Object(o.a)(i,2),s=m[0],f=m[1],b=Object(a.useState)(),g=Object(o.a)(b,2),v=g[0],h=g[1],j=Object(a.useState)(),O=Object(o.a)(j,2),C=O[0],y=O[1],I=Object(a.useState)(Object(d.a)(t)),k=Object(o.a)(I,2),S=k[0],w=k[1],x=Object(a.useState)(0),F=Object(o.a)(x,2),L=F[0],M=F[1],N=Object(a.useState)(20),A=Object(o.a)(N,2),D=A[0],B=A[1];Object(a.useEffect)((function(){var e=Object(d.a)(t);C&&(e=e.filter(J)),r&&e.sort(P),B(e.length);var n=e.slice(L,L+20);w(n)}),[v,C,s,r,L]);var J=function(e){return""===v||e[C].toString().toLowerCase().includes(v)},P=function(e,t){return"ASC"===s?e[r]>t[r]?1:-1:e[r]<t[r]?1:-1},W=function(e){r===e?"ASC"===s?f("DESC"):"DESC"===s?(f(null),u(null)):f("ASC"):(f("ASC"),u(e))},Y=function(e,t){M(0),y(e),h(t)};return console.log("firmy",S),l.a.createElement(l.a.Fragment,null,l.a.createElement(p,null),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Lp"),l.a.createElement("td",{onClick:function(){return W("name")}},"Name","name"===r?s:null),l.a.createElement("td",{onClick:function(){return W("city")}},"City","city"===r?s:null),l.a.createElement("td",{onClick:function(){return W("totalIncome")}},"Total Income","totalIncome"===r?s:null),l.a.createElement("td",{onClick:function(){return W("averageIncome")}},"Average Income","averageIncome"===r?s:null),l.a.createElement("td",{onClick:function(){return W("lastMonthIncome")}},"Last month income","lastMonthIncome"===r?s:null),l.a.createElement("td",{onClick:function(){return W("id")}},"Id","id"===r?s:null)),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("input",{type:"text",onChange:function(e){return Y("name",e.target.value.toLowerCase())},value:"name"!==C?"":v})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",onChange:function(e){return Y("city",e.target.value.toLowerCase())},value:"city"!==C?"":v})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",onChange:function(e){return Y("totalIncome",e.target.value.toLowerCase())},value:"totalIncome"!==C?"":v})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",onChange:function(e){return Y("averageIncome",e.target.value.toLowerCase())},value:"averageIncome"!==C?"":v})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",onChange:function(e){return Y("lastMonthIncome",e.target.value.toLowerCase())},value:"lastMonthIncome"!==C?"":v})),l.a.createElement("td",null,l.a.createElement("input",{type:"text",onChange:function(e){return Y("id",e.target.value.toLowerCase())},value:"id"!==C?"":v})))),l.a.createElement("tbody",null,S.map((function(e,t){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,L+t+1),l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.city),l.a.createElement("td",null,e.totalIncome),l.a.createElement("td",null,e.averageIncome),l.a.createElement("td",null,e.lastMonthIncome),l.a.createElement("td",null,e.id))})))),l.a.createElement(E,{changeOffset:M,offset:L,itemsNumber:D}))};function j(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    margin: 10px;\n"]);return j=function(){return e},e}var O=s.a.div(j());var C=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),u=Object(o.a)(r,2),i=u[0],s=u[1],d=Object(a.useState)([]),f=Object(o.a)(d,2),b=f[0],E=f[1],g=Object(a.useState)(20),v=Object(o.a)(g,2);return v[0],v[1],Object(a.useEffect)((function(){c(!0),m.a.get("https://recruitment.hal.skygate.io/companies").then((function(e){s(e.data),c(!1)})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){c(!0),m.a.all(i.map((function(e){return m.a.get("https://recruitment.hal.skygate.io/incomes/".concat(e.id))}))).then(m.a.spread((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t,l=a.map((function(e){var t=i.find((function(t){return t.id===e.data.id})),n=0,a=e.data.incomes.map((function(e){var t=new Date(e.date),a=t.getFullYear(),l=t.getMonth();return a===(new Date).getFullYear()&&0===l&&(n+=parseFloat(e.value),console.log("mapa",n,e.value)),e.value})).reduce((function(e,t){return parseFloat(e)+parseFloat(t)}));return Object.assign(t,{totalIncome:Number(a).toFixed(2),averageIncome:Number(a/e.data.incomes.length).toFixed(2),lastMonthIncome:Number(n).toFixed(2)})}));E(l),c(!1)}))).catch((function(e){console.log(e),c(!1)}))}),[i]),l.a.createElement(O,null,n&&l.a.createElement("h1",null,"loading"),!n&&l.a.createElement(h,{companiesData:b}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.8e95eaf8.chunk.js.map